import{_ as p}from"./index-CATnW42F.js";import{L as q,O as w,a as $,T as D,c as S,e as O,f as F,g as Z,i as R,d as j,b as B,l as V,o as H,r as U,s as X,t as I}from"./index-CATnW42F.js";const C={quickCheck:e=>/^#{1,6} /gm.test(e)||/\*\*/.test(e)||/```/.test(e)||/\[.*\]\(/.test(e)||/^\s*[-*+]\s+[^:]+$/gm.test(e)||/^---\s*$|^---\s*\n/gm.test(e)||/^\s*\|.*\|/gm.test(e),comprehensiveCheck:e=>{const t=(e.match(/^#{1,6} /gm)||[]).length,a=(e.match(/\*\*[^**]+\*\*/g)||[]).length,c=(e.match(/\*[^ *]+\*/g)||[]).length,i=(e.match(/```[\s\S]*?```/g)||[]).length,r=(e.match(/\[.*\]\(.*\)/g)||[]).length,l=(e.match(/^\s*[-*+]\s+[^:]+$/gm)||[]).length,s=(e.match(/^\s*\d+\.\s+/gm)||[]).length,m=l+s,n=(e.match(/^\s*\|.*\|/gm)||[]).length,d=(e.match(/^\s*\|[-\s:|]+\|/gm)||[]).length,h=(e.match(/^---\s*$|^---\s*\n/gm)||[]).length,u=n>2?2:n>1||n>0&&d>0?1:0,o=(e.match(/^\s*[*\-=_]{3,}\s*$/gm)||[]).length>1,f=[t>0,a>0&&!o,c>0,i>0,r>0,m>0&&!o,u>0,h>0].filter(Boolean).length;return i>0||r>1||t>2||f>=3&&!o||n>0&&d>0},quickConfidence:.6,compConfidence:.9,mimeType:"text/markdown",extension:"md",reasons:["Markdown syntax like headers, bold, code, links, or lists detected","Multiple Markdown elements confirmed"]},k={quickCheck:e=>{const t=e.trim();if(t.startsWith("<?xml"))return!1;const a=e.includes("[CONTENT_TRUNCATED]");let c=t,i=t;if(a){const s=e.split("[CONTENT_TRUNCATED]");s.length>=2&&(c=s[0].trim(),i=s[s.length-1].trim())}const r=/^<[a-z!][^>]*>/i.test(c),l=/<\/[a-z][^>]*>$|<[^>]*\/>$|>$/i.test(i);return r&&l||t.toLowerCase().startsWith("<!doctype html>")?!0:/<([a-z][a-z0-9]*)/i.test(e.slice(0,1e3))},comprehensiveCheck:e=>{const t=e.trim();if(t.startsWith("<?xml")||/xmlns[:=]/i.test(e))return!1;const a=e.includes("[CONTENT_TRUNCATED]");let c=t,i=t;if(a){const o=e.split("[CONTENT_TRUNCATED]");o.length>=2&&(c=o[0].trim(),i=o[o.length-1].trim())}const r=/^<[a-z!][^>]*>/i.test(c),l=/<\/[a-z][^>]*>$|<[^>]*\/>$|>$/i.test(i);if(r&&l){const o=(e.match(/<([a-z][a-z0-9]*)/gi)||[]).length,f=(e.match(/<\/([a-z][a-z0-9]*)/gi)||[]).length;if(Math.abs(o-f)<=Math.max(1,o*.5)&&o>0)return!0}const s=(e.match(/<([a-z][a-z0-9]*)/gi)||[]).length,m=(e.match(/<\/([a-z][a-z0-9]*)/gi)||[]).length,n=/class=|id=|href=|src=|style=|alt=|title=/i.test(e)||/<[^>]*\/>/i.test(e);return e.trim().toLowerCase().startsWith("<!doctype html>")||s>3&&n?Math.abs(s-m)<=Math.max(1,s*.5)&&s>0:[/^#{1,6} /gm,/\*\*[^*]+\*\*/g,/\[.*\]\(.*\)/g,/```/g,/^\s*[-*+]\s+/gm].reduce((o,f)=>o+(e.match(f)||[]).length,0)>2||s===0||!n&&s<2?!1:Math.abs(s-m)<=Math.max(1,s*.5)},quickConfidence:.7,compConfidence:.95,mimeType:"text/html",extension:"html",reasons:["HTML doctype or opening tag detected in snippet","Balanced tags with HTML-specific attributes or self-closing elements (distinguishes from XML)"]},T={quickCheck:e=>{const t=e.trim();return/^\s*[\[\{]/.test(t)||/^\s*"/.test(t)||/^\s*-?\d+(\.\d+)?([eE][+-]?\d+)?\s*$/.test(t)||/^\s*(true|false|null)\s*$/.test(t)},comprehensiveCheck:e=>{try{return JSON.parse(e),!0}catch{return!1}},quickConfidence:.5,compConfidence:1,mimeType:"application/json",extension:"json",reasons:["Content starts with JSON array or object bracket","Full content parses as valid JSON"]},y={quickCheck:e=>{const t=e.trim();return t.startsWith("<?xml")?!0:/<(html|body|div|p|span|img|br|meta|head|title)/i.test(t)?!1:/<([a-zA-Z_:][a-zA-Z0-9_.:-]*)(\s+[^>]*xmlns[^>]*)?>/.test(e.slice(0,100))||/<[^>]+xmlns:/.test(e.slice(0,100))||/<[^>]*\/>/.test(e.slice(0,100))&&/<[^>]*xmlns/.test(e)},comprehensiveCheck:e=>{const t=(e.match(/<([a-zA-Z_:][a-zA-Z0-9_.:-]*)/g)||[]).length,a=(e.match(/<\/([a-zA-Z_:][a-zA-Z0-9_.:-]*)/g)||[]).length,c=/<([a-zA-Z_:][a-zA-Z0-9_.:-]*)([^>]*)>/.test(e);return/<(html|body|div|p)/i.test(e)?!1:t>1&&Math.abs(t-a)<2&&c},quickConfidence:.6,compConfidence:.9,mimeType:"application/xml",extension:"xml",reasons:["XML declaration or namespace-tagged element detected (excluding HTML)","Well-formed XML structure with root element (non-HTML)"]},z={quickCheck:e=>{const t=e.trim();return t.toLowerCase().startsWith("<!doctype")||t.startsWith("<?xml")||/<[a-z][a-z0-9]*[^>]*>/i.test(t.slice(0,200))||t.startsWith("---")?!1:e.includes(",")},comprehensiveCheck:e=>{const t=e.trim();if(t.toLowerCase().startsWith("<!doctype")||t.startsWith("<?xml")||/<[a-z][a-z0-9]*[^>]*>/i.test(t.slice(0,500))||t.startsWith("---"))return!1;const a=e.split(`
`).filter(i=>i.trim());return a.length<2?!1:a.filter(i=>i.includes(",")).length/a.length>.8},quickConfidence:.4,compConfidence:.8,mimeType:"text/csv",extension:"csv",reasons:["Comma delimiter present","Majority of lines contain commas indicating CSV structure"]},M={quickCheck:e=>{const t=e.trim();if(t.toLowerCase().startsWith("<!doctype")||t.startsWith("<?xml")||/<[a-z][a-z0-9]*[^>]*>/i.test(t.slice(0,200)))return!1;if(t.startsWith("---"))return!0;if(t.startsWith("{")&&/[a-zA-Z_$][a-zA-Z0-9_$]*\s*:/.test(e))return!1;const a=(e.match(/:\s/g)||[]).length,c=(e.match(/^\s*-\s/gm)||[]).length;return a>0||c>0},comprehensiveCheck:e=>{if(e.trim().toLowerCase().startsWith("<!doctype")||e.trim().startsWith("<?xml")||/<[a-z][a-z0-9]*[^>]*>/i.test(e.slice(0,500))||/<style[^>]*>[\s\S]*<\/style>/i.test(e)||e.trim().startsWith("{")&&/[a-zA-Z_$][a-zA-Z0-9_$]*\s*:/.test(e))return!1;if((e.match(/^\s*[*\-=_]{3,}\s*$/gm)||[]).length>2){if(e.trim().startsWith("---")&&e.includes("---",3))return!0;const l=(e.match(/^\s*[a-z_][a-z0-9_]*:\s*$/gm)||[]).length,s=/^\s{2,}[a-z_][a-z0-9_]*:\s/.test(e);return l>3&&s}if(e.trim().startsWith("---")&&e.includes("---",3)){const l=e.indexOf("---",3);if((e.slice(3,l).match(/^\s*[^:]+:\s+/gm)||[]).length>0)return!0}const c=(e.match(/^\s*[^:]+:\s+/gm)||[]).length,i=(e.match(/^\s*-\s+/gm)||[]).length,r=/:\s*\n\s+[^\s]/.test(e);return c>1||i>1&&r},quickConfidence:.5,compConfidence:.85,mimeType:"text/yaml",extension:"yaml",reasons:["YAML key-value pair or list item detected","Multiple structured YAML elements with indentation confirmed"]},v={quickCheck:()=>!0,comprehensiveCheck:()=>!0,quickConfidence:.1,compConfidence:.1,mimeType:"text/plain",extension:"txt",reasons:["Default plain text fallback - no specific format markers detected"]},_={quickCheck:e=>e.includes("\\documentclass")||/\\([a-zA-Z]+){/.test(e)||/\\begin\{/.test(e),comprehensiveCheck:e=>{const t=(e.match(/\\([a-zA-Z]+)/g)||[]).length,a=(e.match(/\\begin\{[^}]+\}/g)||[]).length+(e.match(/\\end\{[^}]+\}/g)||[]).length,c=/\\documentclass/.test(e),i=/\\begin\{document\}/.test(e)&&/\\end\{document\}/.test(e);return c&&i?!0:t>3&&a>0},quickConfidence:.7,compConfidence:.95,mimeType:"text/x-tex",extension:"tex",reasons:["LaTeX command or environment detected","Multiple LaTeX commands and environments found"]},L=["md","html","json","xml","csv","yaml","txt","tex"],A=async({content:e,filePath:t,formats:a=[]})=>{if(e===void 0&&t===void 0)throw new Error("Either `content` or `filePath` is required");if(e=e||"",t=t||"",t&&!e){if(!(typeof process<"u"&&!!process.versions?.node))throw new Error("Reading from filePath is only supported in Node.js environments.");e=await(await p(()=>import("./__vite-browser-external-D7Ct-6yo.js").then(d=>d._),[])).readFile(t,"utf8")}const c=a.length?a:L,i=2e3;let r;if(e.length<=i*2)r=e;else{const m=e.slice(0,i),n=e.slice(-i);r=m+`
...[CONTENT_TRUNCATED]...
`+n}const l={md:C,html:k,json:T,xml:y,csv:z,yaml:M,txt:v,tex:_};let s={format:"txt",mimeType:"text/plain",extension:"txt",confidence:.1,reasons:["Defaulted to plain text format - low confidence level for all other formats"]};for(const m of c){const n=l[m];if(!n||!n.quickCheck(r))continue;let h,u;if(n.comprehensiveCheck){const g=m==="json"?e:r;if(!n.comprehensiveCheck(g))continue;h=n.compConfidence,u=n.reasons}else h=n.quickConfidence,u=n.reasons;h>(s.confidence||0)&&(s={format:m,mimeType:n.mimeType,extension:n.extension,confidence:h,reasons:u})}return s};export{q as Log,w as ORIGINAL_CONSOLE_METHODS,$ as OptionsManager,D as Turnstile,S as convertBytesToUnit,A as detectFormatFromText,O as formatDate,F as formatFileSize,Z as getFileExtension,R as isDev,j as isValidEmail,B as isValidFilename,V as log,H as optionsManager,U as removeFileExtension,X as sanitizeFilename,I as turnstile};
//# sourceMappingURL=index-B7fb-8bL.js.map
